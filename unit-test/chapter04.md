# 4. 좋은 단위 테스트의 4대 요소
- 좋은 단위 테스트 스위트의 특성
  - 개발 주기에 통합돼 있다. 실제로 사용하는 테스트에만 가치가 있다. 그렇지 않으면 작성해도 의미가 없다
  - 코드베이스의 가장 중요한 부분만을 대상으로 한다
  - 최소한의 유지비로 최대한의 가치를 끌어낸다
    - 가치 있는 테스트를 식별해야 한다
    - 가치 있는 테스트를 작성해야 한다

## 4.1 좋은 단위 테스트의 4대 요소 자세히 살펴보기
- 좋은 단위 테스트의 네 가지 특성
  - 회귀 방지
  - 리팩터링 내성
  - 빠른 피드백
  - 유지 보수성

### 4.1.1 첫 번째 요소: 회귀 방지
- 회귀란 소프트웨어 버그이다. 코드 베이스를 수정한 후 기능이 의도한 대로 동작하지 않는 경우를 말한다
- 코드 베이스가 커질 수록 잠재적인 버그에 더 많이 노출되므로, 회귀 방지는 중요하다
- 회귀 방지를 위한 중요한 3가지 사항
  - 테스트 중에 실행되는 코드의 양
    - 코드의 양이 많을 수록 회귀가 발생할 가능성이 높다
    - 예외를 발생시키지 않고 실행되는 것과 유효한 결과가 도출되었는지도 확인 해야 한다
  - 코드 복잡도
  - 코드의 도메인 유의성
- 개발자가 직접 작성하지 않는 코드인 라이브러리, 프레임 워크, 외부 시스템도 테스트 범주에 포함 시켜 의존성에 대해 검증해야 한다

### 4.1.2 두 번째 요소: 리팩터링 내성
- 리팩터링 내성은 테스트를 실패하지 않고 기본 애플리케이션 코드를 리팩터링할 수 있는 지에 대한 척도다
- 거짓 양성(False positive)는 실제로 기능은 의도한대로 동작하지만 테스트는 실패하는 상황을 의미한다
- 거짓 양성은 테스트가 제공하는 소프트웨어의 지속가능한 성장을 방해한다
  - 테스트가 타당한 이유 없이 실패하면 코드 문제에 대응하는 능력과 의지가 희석된다. 시간이 흐르면서 실패에 익숙해지고 신경쓰지 않게된다
  - 거짓 양성이 빈번하면 테스트 스위트에 대한 신뢰도가 떨어지며, 더 이상 믿을 만한 안전망으로 인식하지 않는다

### 4.1.3 무엇이 거짓 양성의 원인인가?
- 테스트에서 발생하는 거짓 양성의 수는 테스트 구성 방식과 직접적인 관련이 있다
- SUT의 세부적인 구현 사항와 테스트가 많이 결합할 수록 거짓 양성이 많이 발생한다
- 거짓 양성이 생길 가능성을 줄이는 방법은 구현 세부사항에서 테스트를 분리하는 것 뿐이다
  - 최종 사용자 관점에서 SUT를 검증한다
  - 최종 사용자에게 의미있는 결과만 확인한다
- 테스트를 구성하기 가장 좋은 방법은 문제 영역에 대해 이야기 하는 것이다

### 4.1.4 구현 세부 사항 대신 최종 결과를 목표로 하기
- 생략