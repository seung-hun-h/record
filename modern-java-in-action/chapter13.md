# 디폴트 메서드
- 인터페이스를 구현하는 클래스는 인터페이스에서 정의하는 모든 메서드 구현을 제공하거나 아니면 슈퍼 클래스의 구현을 상속받아야 한다
- 라이브러리 설계자 입장에서 인터페이스에 새로운 메서드를 추가하는 등 인터페이스를 바꾸고 싶을 때 문제가 발생한다
  - 이전 인터페이스를 구현했던 모든 클래스의 구현을 변경해야 한다
- 자바 8에서 인터페이스의 이러한 단점을 해결하기 위해 기존 인터페이스를 구현하는 2가지 방식을 제공한다
  - 인터페이스 내부에 정적 메서드를 사용한다
  - 인터페이스의 기본 구현을 제공할 수 있도록 디폴트 메서드를 제공한다
- List 인터페이스의 sort는 디폴트 메서드이다

```java
default void sort(Comparator<? super E> c) {
    Collections.sort(this, c);
}
```

```java
List<Integer> numbers = Arrays.asList(3, 5, 1, 2, 6);
numbers.sort(Comparator.naturalOrder());
```

- Comparator.naturalOrder()는 표준 앏파벳 순서로 요소를 정렬할 수 있도록 Comparator 객체를 반환하는 Comparator 인터페이스에 추가된 새로운 정적메서드이다.
- 디폴트 메서드를 이용하면 인터페이스의 기본 구현을 그대로 상속하므로 인터페이스에 자유롭게 새로운 메서드를 추가할 수 있게된다.


## 변화하는 API
- API를 설계하면 인터페이스를 구현하는 클래스들이 생겨난다.
- 뒤 늦게 인터페이스에 부족한 기능을 발견하고 추가하는 경우가 생길 수 있다
- 인터페이스에 새로운 메서드를 추가하더라도 바이너리 호환성은 유지된다
  - 바이너리 호환성은 새로 추가된 메서드를 호출하지만 않으면 새로운 메서드 구현이 없이도 기존 클래스 파일 구현이 잘 동작한다는 의미이다
  - 하지만 언젠가는 누군가가 새로 추가된 메서드를 사용하도록 코드를 변경할 수도 있다
  - 이때 런타임 에러가 발생할 수 있다(
  - 그리고 새로운 메서드를 구현하지 않은 채로 재 빌드하면 컴파일 에러가 발생할 수 있다

### 바이너리 호환성, 소스 호환성, 동작 호환성
- 바이너리 호환성
  - 뭔가를 바꾼 이후에도 에러 없이 기존 바이너리가 실행될 수 있는 상황
  - 인터페이스에 메서드를 추가했을 때 추가된 메서드를 호출하지 않는 한 문제가 일어나지 않는다
- 소스 호환성
  - 코드를 고쳐도 기존 프로그램을 성공적으로 재컴파일할 수 있음을 의미함
  - 인터페이스에 메서드를 추가하면 클래스를 고쳐야하므로 소스 호환성이 아니다
- 동작 호환성
  - 코드를 바꾼 다음에도 같은 입력값이 주어지면 프로그램이 같은 동작을 실행하는 것을 의미함
  - 인터페이스에 메서드를 추가하더라도 프로그램에서 추가된 메서드를 호출할 일은 없으므로 동작 호환성을 유지된다

## 디폴트 메서드란 무엇인가?
- 디폴트 메서드는 인터페이스 자신을 구현하는 클래스에서 메서드를 구현하지 않을 수 있는 새로은 메서드 시그니처를 제공한다
- 인터페이스가 구현을 가질 수 있고, 인터페이스를 구현하는 클래스가 디폴트 메서드와 같은 메서드 시그니처를 정의하거나 디폴트 메서드를 오버라이드하는 문제를 해결하기 위한 규칙이 몇가지 존재한다

### 추상 클래스 VS 인터페이스
- 둘 다 추상 메서드와 바디를 포함하는 메서드를 정의할 수 있다
- 클래스는 하나의 추상클래스만 상속받을 수 있지만, 인터페이스를 여러 개 구현할 수 있다
- 추상 클래스는 인스턴스 변수로 공통 상태를 가질 수 있다. 인터페이스는 인스턴스 변수를 가질 수 없다


