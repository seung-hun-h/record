- Oracle RAC(Real Application Clusters)은 오라클 데이터베이스의 고가용성 및 확장성을 위한 클러스터링 솔루션이다
- RAC는 여러 대의 서버 노드로 구성된 클러스터에서 데이터베이스 인스턴스를 실행하고 데이터를 공유하여 장애 대응과 성능 향상을 제공한다

## 오라클 RAC Components
- 애플리케이션은 'Oracle Clusterware'의 데이터베이스 인스턴스 중 하나와 연결한다
	- 데이터베이스 인스턴스란 오라클 데이터베이스를 실행하는데 사용되는 프로세스와 메모리의 집합이다
- 모든 서버는 실제 데이터를 저장하고 있는 공유 저장 시스템(Shared Storage System)에 접근해야 한다
- 각 서버는 전용 고속 네트워크인 RAC Interconnect를 통해 연결되어야 한다

<img width="500" alt="image" src="https://github.com/seung-hun-h/record/assets/60502370/f4e930c6-0856-4039-af39-e80b6bde8912">

### Oracle Scale-out architecture
- 데이터베이스 시스템이 수평적 확장을 하는 방법 2가지
	- SQL을 실행하여 데이터를 서버로 가져오는 방법(Data Shipping or Shared DIsk라 불린다)
	- SQL을 원격에 있는 서버에 전달하고 데이터를 로컬에서 접근하는 방법(Function Shipping, Shared Nothing이라 불린다
- 오라클 RAC는 두 가지 방법을 혼합해서 사용한다
	- 분석이나 배치 SQL처럼 오래 걸리는 SQL은 `Function Shipping`을 사용한다
		- SQL을 나누어서 클러스터 내 인스턴스에서 병렬로 실행한다
		- OLTP 요청은 일반적으로 적은 수의 행에 접근하며 빠른 응답 시간을 요구하기 때문에 `Function Shipping`은 적합하지 않다
		- 원격 노드에 RPC 호출을 보내고 한 행에 접근하거나 인덱스를 탐색하는 것은 비용이 많이든다
	- OLTP SQL처럼 오래 걸리지 않는 SQL은 `Data Shipping`을 사용한다
		- 애플리케이션에서 받은 요청을 한 인스턴스에서 바로 처리한다
		- 요청된 데이터는 인스턴스의 메모리에서 접근하고, 없으면 고성능 데이터 전송 프로토콜을 사용해서 저장소 또는 원격 인스턴스에서 가져와 로컬에 캐시된다

### Oracle Clusterware
- 여러대의 서버를 고가용성을 갖춘 시스템으로 만드는 기술이다
- 장애 탐지, 노드 멤버쉽, 노드 펜싱 및 최적의 리소스 배치를 제공한다
	- 노드 멤버쉽: 현재 활성화된 노드들의 상태를 추적하고 관리하는 기능
	- 노드 펜싱: 장애가 발생한 노드를 격리시키는 메커니즘

### Oracle ASM
- 파일 시스템과 볼륨 매니저
- 24/7 가용성을 유지하면서 수천개의 스토리지 장치를 효율적으로 공유하고 확장할 수 있게 해준다
- 클러스터의 모든 서버에서 스토리지 관리를 제공하고, 데이터를 분산 저장하고, I/O 성능을 극대화 한다

### Application Continuity
- 오라클 RAC는 active-active 데이터베이스 시스템이다
	- RAC 데이터베이스 인스턴스나 서버에 장애(failure)가 발생해도 여전히 데이터베이스를 사용할 수 있다
- Application Continuity를 활용하면 데이터베이스 인스턴스에 장애가 발생했을 때 애플리케이션의 연결에 대해 자동으로 장애 복구가 가능하다.
	- 살아있는 다른 데이터베이스 인스턴스에 연결한다