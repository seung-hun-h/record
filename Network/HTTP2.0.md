## HTTP/2.0 등장 배경
---
HTTP/1.1의 메시지 포맷은 구현의 단순성과 접근성에 주안점을 두고 최적화 되었다. 그렇다 보니 애플리케이션 성능에 대한 희생은 불가피했다.

**HTTP/1.x는 하나의 커넥션을 통해 요청 하나를 보내고 그에 대한 응답을 하나만을 받았다**. 이러한 동작 방식은 단순함 면에서는 더할 나위 없었지만, 응답을 받아야만 다음 요청을 전달할 수 밖에 없었기 때문에 심각한 **회전 지연**을 피할 수 없었다.

이에 대한 해결책으로 한 번에 여러 개의 커넥션을 맺는 병렬 커넥션이나 한 번에 여러 개의 요청을 전달하느 파이프라인 커넥션이 도입되었지만 성능 개선의 근본적인 해결책은 될 수 없었다.

HTTP/1.x는 요청 및 응답 헤더를 압축지 않으므르 불필요한 네트워크 트래픽이 발생하며, 효과적인 리소스 우선순위 지정을 허용하지 않아 기본 TCP 연결을 제대로 사용할 수 없었다.

이러한 제한은 치명적이지는 않지만, 웹 애플리케이션이 널리 사용되고 중요해짐에 따라 웹 개발자가 사용자에게 더 많은 부담을 주었다.

이러한 HTTP/1.1의 문제점을 해결하기 위해 HTTP/2.0이 나타났다. 현재 HTTP/2.0은 **구글이 만든 SPDY 프로토콜**을 바탕으로 만들어졌다. SPDY는 **헤더를 압축하여 대역폭을 절약**했고, **하나의 TCP 커넥션에 여러 요청을 동시에 보내 회전 지연을 줄이는 것**이 가능했고, 클라이언트가 요청을 하지 않아도 **서버가 능동적으로 리소스를 푸시하는 기능**도 가지고 있었다.

>HTTP/2는 헤더 필드를 압축을 도입하고 동일한 연결에서 다중 동시 교환을 허용함으로써 네트워크 리소스를 보다 효율적으로 사용하고 지연 시간을 줄일 수 있습니다. 구체적으로 말하자면, 동일한 연결에서 요청 및 응답 메시지의 인터리빙을 허용하고, HTTP 헤더 필드에 효율적인 코딩을 사용합니다. 또한 요청의 우선순위 지정을 허용함으로써 더 중요한 요청이 더 빨리 완료되도록 하여 성능을 더욱 개선합니다. <br>이 프로토콜은 HTTP/1.x에 비해 더 적은 TCP 연결이 사용되므로, 네트워크에 더 친화적입니다. 즉, 다른 흐름과의 경쟁이 줄어들고 연결 수명이 더 길어지므로 가용 네트워크 용량의 활용도가 향상됩니다. 마지막으로, HTTP/2에서는 바이너리 메시지 프레이밍을 사용하여 보다 효율적인 메시지 처리도 가능합니다. (Hypertext Transfer Protocol 버전 2, 초안 17)

중요한점은 HTTP/2.0이 이전의 HTTP 표준을 대체하는 것이 아니라 확장한다는 것이다. HTTP애플리케이션의 의미체계는 동일하게 유지되며 제공되는 기능이나 핵심개념(HTTP 메서드, 상태 코드, URI 및 헤더필드)는 변경되지 않는다.

## HTTP/1.1과의 차이
---

### 바이너리 프레이밍 계층
HTTP/2.0의 모든 성능 향상 중 핵심은 새로운 바이너리 프레이밍 계층이다. 이 계층은 HTTP 메시지가 캡슐화되어 클라이언트와 서버 사이에 전송되는 방식을 규정한다.

<p align=middle>
    <img src=https://user-images.githubusercontent.com/60502370/140847243-340ce828-91b3-4791-a7e3-b917991b242b.png width=500>
</p>

줄바꿈으로 구분되는 일반 텍스트 HTTP/1.x 프로토콜과 달리, 모든 HTTP/2.0 통신은 더 작은 메시지와 프레임으로 분할되며, 각각은 바이너리 형식으로 인코딩된다.

따라서 클라이언트와 서버는 서로를 이해하기 위해 새 바이너리 인코딩 매커니즘을 사용해야한다. HTTP/1.x 클라이언트는 HTTP/2.0 전용 서버를 이해하지 못하며 반대도 마찬가지이다. 다행히 필요한 모든 프레이밍 작업을 클라이언트와 서버가 대신 수행해주기 때문에 애플리케이션은 이 모든 변경을 인식하지 않아도 된다.


### 스트림
스트림은 HTTP/2.0 커넥션을 통해 클라이언트와 서버 사이에서 교환되는 프레임들의 독립된 양방향 시퀀스이다.

- 스트림: 구성된 연결 내에서 전달되는 바이트의 양방향 흐름. 하나 이상의 메시지가 전달될 수 있다.
- 메시지: 논리적 요청 또는 응답 메시지에 매핑되는 프레임의 전체 시퀀스
- 프레임: HTTP/2.0에서 통신의 최소 단위. 각 최소 단위에는 하나의 프레임 헤더가 포함된다. 프레임 헤더는 최소한으로 프레인이 속하는 스트림을 식별한다.
