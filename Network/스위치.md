<p align=middle>
    <img src=https://user-images.githubusercontent.com/60502370/140743009-5eb7cf28-9bd8-4b85-9f01-9c1cfe4811a6.png width=500>
</p>

스위치는 네트워크 중간에서 패킷을 받아 필요한 곳에만 보내주는 네트워크의 중재자 역할을 한다. 스위치는 아무 설정 없이 네트워크에 연결해도 MAC 주소를 기반으로 패킷을 전달하는 기본 동작을 수행할 수 있다.

스위치를 사용하면 여러 단말이 한꺼번에 통신할 수 있어 통신을 위해 기다리거나 충돌 때문에 대기하는 문제가 해결된다.

스위치의 핵심 역할은 누가 어느 위치에 있는지 파악하고 실제 통신이 이루어지면 자신이 알고있는 위치로 패킷을 전달하는 것이다. 이를 위해 스위치는 MAC 주소와 단말이 위치하는 인터페이스 정보를 매핑한 MAC 주소 테이블을 가지고 있다.

<p align=middle>
    <img src=https://user-images.githubusercontent.com/60502370/140743358-010cdef7-d575-4c43-82f6-bee87f98abc6.png width=500>
</p>
<p align=middle>
    <img src=https://user-images.githubusercontent.com/60502370/140743426-39dfd39d-d45a-40e1-bb5e-10caa1515230.png width=700>
</p>

스위치의 동작 방식은 다음 3가지로 정리할 수 있다.

1. 플러딩
2. 어드레스 러닝
3. 포워딩/필터링

## 플러딩
---
스위치는 부팅하면 네트워크 관련 정보가 아무것도 없어 허브처럼 동작한다. 허브는 패킷이 들어온 포트를 제외하고 모든 포트로 패킷을 전달한다. 이처럼 스위치가 허브와 같이 모든 포트로 패킷을 흘리는 동작 방식을 플러딩이라한다.

스위치는 패킷이 들어오면 도작치 MAC 주소를 확인한다. 테이블에 해당 MAC 주소가 없으면 패킷을 플러딩한다.

## 어드레스 러닝
---

플러딩은 스위치의 정상적인 동작이다. 하지만 이런 동작이 많아지면 스위치가 제 역할을 하지 못한다. 패킷이 스위치에 들어오면 해당 패킷 정보의 MAC 주소를 보고 이를 학습해 MAC 주소 테이블을 만들고 유지한다. 이러한 과정을 어드레스 러닝이라한다.

어드레스 러닝은 패킷의 출발지 MAC 주소를 이용한다. 만약 1번 포트에서 AAAA 출발지 MAC 주소를 가진 패킷이 들어오면 해당 정보를 테이블에 저장해둔다. 이후 AAAA 목적지 MAC 주소를 가진 패킷이 들어오면 학습된 내용을 바탕으로 플러딩 하지 않고 1번 포트로 패킷을 전달한다.

## 포워딩/필터링
---
스위치는 패킷이 들어온 경우 도착지  MAC 주소를 확인하고 자신이 가진 MAC 테이블과 비교해 맞는 정보가 있으면 매치되는 해당 포트로 패킷을 보내고 그렇지 않으면 패킷을 보내지 않는다.

이렇게 매치되는 포트로 패킷을 보내는 것을 포워딩, 보내지 않는 것을 필터링이라한다.

스위치는 일반적인 유니캐스트에 대해서만 포워딩과 필터링 작업을 수행한다. 브로드 캐스트나 멀티 캐스트는 모두 출발지가 사용되지 않으므로 이런 트래픽은 포워딩이나 필터링 하지 않고 모두 플러딩한다.

