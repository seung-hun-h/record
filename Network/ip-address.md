# IP 주소

3계층의 논리적 주소이다. IP 주소를 포함한 3계층의 주소는 다음과 같은 특징을 가진다.
- 사용자가 변경이 가능한 주소이다.
- 주소에 레벨이 있다. 그룹을 의미하는 네트워크 주소와 호스트 주소로 나뉜다.

## IP 주소 체계
흔히 사용하는 IP주소는 32비트 주소인 IPv4이다.
<p align=middle>
    <img src=https://user-images.githubusercontent.com/60502370/140734693-6256d764-3fb6-4985-be96-0c093ab6d774.png width=500>
</p>

IP는 v4, v6 두 체계가 있고 v6은 128비트 주소 체계이다. MAC 주소가 16진수로 표기된 것과 다르게 IP주소는 10진수로 표기한다.

- 네트워크 주소: 호스트들을 모은 네트워크를 지징하는 주소이다. 네트워크 주소가 동일한 네트워크를 로컬 네트워크라 한다.
- 호스트 주소: 하나의 네트워크 내에 존재하는 호스트를 구분하기 위한 주소이다.

IP주소는 MAC주소가 고정적인 크기로 분할되는 것과 다르게 유동적으로 네트워크와 호스트 주소가 분할된다.

### 클래스풀(Classful)
**네트워크 주소 범위를 클래스 별로 설정**하여 각 조직에 배분하는 방식을 클래풀이라 한다.

<p align=middle>
    <img src=https://user-images.githubusercontent.com/60502370/140877655-2454a524-9dfc-479b-9e01-fc2c6d242fba.png width=500>
</p>

- A클래스: 네트워크 주소 1옥텟 + 호스트 주소 3옥텟
- B클래스: 네트워크 주소 2옥텟 + 호스트 주소 2옥텟
- C클래스: 네트워크 주소 3옥텟 + 호스트 주소 1옥텟

클래스 기반의 IP주소 체계에서는 옥텟의 위치를 통해 클래스를 구분할 수 있다. 

### 클래스리스(Classless)
클래스풀 IP 주소는 네트워크 주소와 호스트 주소를 구분 짓는 구분자인 서브넷 마스크가 필요하지 않다. 맨 앞자리 주소만 보고 해당 주소가 어느 클래스에 위치한 지 알 수 있기 때문이다.

하지만 인터넷이 상용화되면서 클래스풀 주소 체계는 급속도로 늘어나는 IP 주소에 대한 요구를 감당할 수 없었고, 다음과 같은 문제점들이 있었다.

- 하나의 네트워크에서 IP를 사용하면 다른 네트워크에서 그 IP를 사용하지 못했다
- IPv4의 크기가 작았다.
- 상위 클래스(A class)를 할당 받은 조직이 주소를 제대로 활용하지 않았다.

이러한 문제점의 해결책으로 다음 3가지가 제안되었다.
- 단기: 클래스 리스기반 주소체계
- 중기: NAT와 사설 IP 주소
- 장기: IPv6


클래스의 개념을 버린 클래스리스기반 주소체계는 맨 앞의 숫자를 통해 네트워크 주소와 호스트 주소를 구분할 수 없었다. 클래스리스 네트워크에서는 별도의 구분자를 사용하는데 이를 **서브넷 마스크**라한다.

### 서브넷 마스크
서브넷 마스크는 IP 주소와 네트워크 주소를 구분할 때 사용하는 구분자이다. 2진수 숫자 1은 네트워크 주소, 0은 호스트 주소로 표시한다.

클래스를 서브넷 마스크로 나타내면 아래와 같다.
<p align=middle>
    <img src=https://user-images.githubusercontent.com/60502370/140879111-f3f2bb02-595a-4880-9965-6bb7e377794c.png width=500>
</p>

IP 주소를 서브넷 마스크와 `& 연산`하면 네트워크 주소를 확인할 수 있다.

<p align=middle>
    <img src=https://user-images.githubusercontent.com/60502370/140879606-770c5aee-994d-4e6a-aabb-db2321c084c1.png width=500>
</p>

### 서브 네팅
네트워크-호스트 구분 기준을 사용자가 정해, 원래 클래스풀 단위의 네트워크보다 더 쪼개 사용하는 것을 서브 네팅이라한다.

부여된 주소를 다시 잘라 사용해 서브네팅이라 부르는데 현대 클래스리스 네트워크의 가장 큰 특징이다.
<p align=middle>
    <img src=https://user-images.githubusercontent.com/60502370/140881269-85bfe37f-e68b-4615-8512-b49420378e1a.png width=500>
</p>

### 공인IP와 사설IP

인터넷에 접속하기 위해서는 IP 주소가 필요하고 이 IP는 전세계에서 유일해야 하는 식별자이다. 이러한 IP 주소를 **공인IP**라고 한다.

인터넷에 연결하지 않고 개인적으로 네트워크를 구성한다면 공인IP 주소를 할당 받지 않고도 네트워크를 구축할 수 있다. 이때 사용하는 주소를 **사설IP 주소**라고 한다.

주로 인터넷에 접속하지 않거나 NAT(Network Address Translation)기술을 사용할 경우 사설IP 주소를 사용한다. 공유기가 대표적인 NAT 장비 중 하나이다.

NAT 기술을 사용하더라도 다른 사용자에게 이미 부여된 IP를 사설 IP 주소로 사용하면 안된다. 
