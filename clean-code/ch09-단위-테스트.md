# 단위 테스트
## TDD 법칙 세 가지
1. 실패하는 단위 테스트를 작성할 때까지 실제 코드를 작성하지 않는다
2. 컴파일은 실패하지 않으면서 실행이 실패하는 정도로만 단위 테스트를 작성한다
3. 현재 실패하는 테스트를 통과할 정도로만 실제 코드를 작성한다

- 위 세 가지 규칙을 따르면 개발과 테스트가 대략 30초 주기로 묶인다
- 테스트 코드와 실제 코드가 함께 나온다
- 방대한 테스트코드가 관리 문제를 유발하기도 한다

## 깨끗한 테스트코드 유지하기
- 테스트 코드는 실제 코드 못지 않게 중요하다
- 테스트 코드는 사고와 설계와 주의가 필요하다

### 테스트는 유연성, 유지보수성, 재사용성을 제공한다
- 테스트가 없으면 모든 변경이 잠재적 버그다
- 실제 코드를 점검하는 자동화된 단위 테스트 슈트는 설계와 아키텍처를 최대한 깨끗하게 보존하는 열쇠다
- 테스트 코드가 지저분하면 코드를 변경하는 능력이 떨어지며 코드 구조를 개선하는 능력도 떨어진다

### 깨끗한 테스트 코드
- 테스트 코드를 꺠끗하게 유지하기 위해서는 **가독성이 가장 중요하다**
- 테스트  코드는 본론에 돌입해 진짜 필요한 자료 유형과 함수만 사용한다
- 도메인에 특화된 테스트 언어
  - 도메인에 특화된 언어(DSL)로 테스트 코드를 작성할 수 있다
  - 숙련된 개발자는 자기 코드를 좀 더 간결하고 표현력이 풍부한 코드로 리팩터링 해야 마땅하다
- 이중 표준
  - 실제 환경에서는 절대로 안되지만 테스트 환경에서는 전혀 문제 없는 방식이 있다.(String의 + 연산과 StringBuffer의 append 연산)
  - 대개 메모리나 CPU 효율과 관련 있는 경우다. 코드의 깨끗함과는 철저히 무관하다

## 테스트당 assert 하나
- **단일 assert 문 규칙은 훌륭한 지침이 될 수 있다**
- 반드시 하나일 필요는 없지만 최대한 assert 문을 줄이는 것이 좋다
- **테스트당 개념 하나**
  - 테스트 함수마다 한 개념만 테스트하라는 규칙이 더 나을 수 있다

## F.I.R.S.T
깨끗한 규칙은 다음 다섯가지 규칙을 따른다
1. Fast
   - 테스트는 빨라야 한다. 
2. Independent
   - 각 테스트는 서로 의존하면 안 된다.
3. Repeatable
   - 테스트는 어떤 환경에서도 반복 가능해야 한다.(네트워크가 연결되지 않는 상황에서도)
4. Self-Validating
   - 테스트는 부울 값으로 결과를 내야 한다
5. Timely
   - 테스트는 적시에 작성해야 한다.
   - 단위 테스트는 테스트 하려는 실제 코드를 구현하기 직전에 구현한다
