## 스트림은 주의해서 사용하라
---
- 스트림 API는 다량의 데이터 처리 작업을 돕고자 자바 8에서 추가되었다
- 스트림 APi 제공하는 중요한 추상 개념 두 가지
	- 스트림은 데이터 원소의 유한 혹은 무한 시퀀스를 뜻한다
	- 스트림 파이프라인은 이 원소들로 수행하는 연산 단계를 표현하는 개념이다

### 스트림의 구성
- 스트림은 소스 스트림에서 시작해 종단 연산으로 끝나며, 그 사이에 하나 이상의 중간 연산이 존재한다
- 중간 연산은 스트림을 어떠한 방식으로 변환한다
	- 변환된 스트림의 원소 타입은 같을 수도, 다를 수도 있다
- 종단 연산은 마지막 중간 연산이 내놓은 스트림에 최후의 연산을 가한다
  
  ### 스트림의 특징
- 스트림 파이프라인은 지연 평가 된다
	- 평가는 종단 연산이 호출될 때 이뤄지며, 종단 연산에 쓰이지 않는 데이터 원소는 계산에 쓰이지 않는다
	- 지연 평가는 무한 스트림을 다룰 수 있게 해주는 열쇠다
	- 종단 연산을 빼먹는 일이 없도록 하자

- 스트림은 메서드 연쇄를 지원하는 플루언트 API이다
- 기본적으로 스트림 파이프라인은 순차적으로 동작한다
	- 파이프라인을 병렬로 실행(`parallel` 호출)할 수도 있지만 유용한 경우가 그리 많지 않다

### 스트림은 제대로 사용해야 한다
- 스트림을 잘못 사용하면 읽기 어렵고 유지보수도 힘들다
- `char`값들을 처리할 때는 스트림을 삼가는 편이 낫다
- 기존 코드는 스트림을 사용하도록 리팩터링하되, 새코드가 더 나아 보일 때만 반영하자

#### 코드 블록만 할 수 있는 경우
- 코드 블록에서는 범위 안의 지역변수를 읽고 수정할 수 있다
	- 람다는 final이나 사실상 final인 변수만 읽을 수 있고, 지역 변수를 변경할 수 없다
- 코드 블록에서는 return문을 사용해 메서드를 빠져나가거나, break, continue를 사용해 반복문을 통제할 수 있다
- 메서드 선언에 명시된 검사 예외를 던질 수 있다

#### 스트림이 안성맞춤인 경우
- 원소들의 시퀀스를 일관되게 변환한다
- 원소들의 시퀀스를 필터링한다
- 원소들의 시퀀스를 하나의 연산을 사용해 결합한다
- 원소들의 시퀀스를 컬렉션에 모은다
- 원소들의 시퀀스에서 특정 조건에 만족하는 원소를 찾는다

#### 스트림으로 처리하기 어려운 경우
- 한 데이터가 파이프라인의 여러 단계를 통과할 때 이 데이터가 각 단계에서의 값들어 동시에 접근하기 어려운 경우
	- 스트림에서는 한 값을 매핑하면 원래 값은 잃는 구조다
	- 새로운 값의 쌍을 저장할 수도 있지만, 만족스럽지 않는 해결책이다
	- 가능한 경우라면, 앞 단계의 값이 필요할 때 매핑을 거꾸로 수행하는 방법이 나을 것이다