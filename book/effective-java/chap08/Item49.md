## 매개변수가 유효한지 검사하라
---
- 메서드나 생성자는 대부분 입력이 특정 조건을 만족하기를 바란다
- 이런 제약은 문서화 해야 하며, 메서드 몸체가 시작되기 전에 검사해야 한다
	- 자바 독을 사용해서 문서화하라는데 굳이 그렇게 해야할까?
	- 코드는 계속해서 바뀌는데 테스트 코드를 통해서 문서화 하는 것이 더 좋지 않을까?

### 메서드 변수 검사를 제대로 하지 않을 때 발생할 수 있는 문제
1. 메서드가 수행되는 중간 모호한 예외를 던지며 실패할 수 있다
2. 메서드가 잘 수행되지만 잘못된 결과를 반환할 수 있다
3. 메서드가 문제 없이 실행됐지만, 어떤 객체를 이상한 상태로 변경해서 미래의 알 수 없는 시점에 이 메서드와 관련 없는 오류를 낼 수 있다
---

- 메서드에서 직접 사용하지는 않지만 나중에 쓰기 위해 저장하는 매개변수는 특히 더 신경 써야 한다
	- 생성자 매개변수의 유효성 검사는 클래스 불변식을 어기는 객체가 만들어지지 않게 하는데 꼭 필요하다

---

### 예외적인 상황
- 유효성 검사 비용이 지나치게 높거나 실용적이지 않을 때, 혹은 계산 과정에서 암묵적으로 검사가 수행 될때가 예외적인 상황이다
	- `Collections.sort(List)`는 리스트 안의 모든 객체를 비교할 수 있어야한다. 이 경우 모든 객체를 비교할 수 있는 지 검사하는 것은 비용이 크다
	- 하지만 암묵적인 유효성 검사에 너무 의존했다가는 실패 원자성을 해칠 수 있으니 주의해야 한다
- 계산 과정에서 필요한 유효성 검사가 이뤄지지만, 실패했을 때 잘못된 예외를 던지기도 한다
	- 잘못된 매개변수 값을 사용해 발생한 예외와 API 문서에서 던지기로한 예외가 다를 수 있다는 뜻이다
	- 이때는 예외 번영을 통해 API 문서에 기재된 예외를 던져야 한다

---

- 이번 아이템을 "매개변수에 제약을 두는게 좋다"고 이해하면 안된다
- 메서드는 최대한 범용적으로 설계해야 한다
- 메서드가 건네 받은 값으로 무언가 제대로 된 일을 할 수 있다면 매개변수 제약은 적을수록 좋다
- 하지만 구현하려는 개념 자체가 특정한 제약을 내재한 경우도 드물지 않다(?)

