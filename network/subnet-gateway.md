# 서브넷과 게이트웨이
## 서브넷과 게이트웨이의 용도
로컬 네트워크에서는 ARP 브로드캐스트를 통해 도착지 MAC 주소를 학습할 수 있고, MAC 주소를 통해 직접 통신할 수 있다. 하지만 브로트캐스트 통신은 네트워크(LAN)을 넘어가지 못한다는 단점이 있다.

따라서 원격 네트워크 통신을 위한 장비가 필요한데 이를 게이트웨이(Gateway)라고 한다. 그리고 게이트웨이에 대한 정보를 PC나 네트워크 장비에 설정하는 항목이 기본 게이트웨이이다.

<p align=middle>
    <img src=https://user-images.githubusercontent.com/60502370/140902859-2a807958-c4a1-474f-9bed-1adcea35c189.png width=500>
</p>

기본 게이트웨이는 3계층 장비가 수행하고, 여러 네트워크와 연결되면서 적절한 경로를 지정해주는 역할을 한다.

### 원격 통신을 판단하는 방법
LAN 내에서 통신과 원격 네트워크 통신은 다른 방식으로 동작하기 떄문에 통신할 네트워크 범위를 확인하는 작업이 필요하다. 

이때 사용되는 것이 서브넷 마스크이다. 자신이 속한 네트워크를 구하는 방법은 자신의 IP 주소와 서브넷 마스크를 AND 연산해 나오는 값이다. 이 연산 결과가 자신의 네트워크에 속하면 로컬 통신이고 그렇지 않으면 원격 통신이다.

### 로컬 네트워크 통신과 원격지 네트워크 통신
2 계층 통신과 3 계층 통신이라고도 한다. 로컬 네트워크 통신은 라우터와 같은 3계층 네트워크 장비의 도움 없이 통신이 가능하다. 원격지 네트워크와 통신해야 하는 경우 라우터와 같은 3 계층 장비가 필요하다

<img width="548" alt="image" src="https://user-images.githubusercontent.com/60502370/155867658-f6c18060-8b74-4e0c-97d8-536dd811a478.png">

- 로컬 네트워크 통신에서는 목적지 MAC 주소를 알아내기 위해 ARP 브로드캐스트를 하고 MAC 주소를 알아내면 패킷을 캡슐화 하여 통신한다
- 외부 네트워크와 통신이 필요할 때는 ARP 요청을 기본 게이트웨이의 IP 주소로 요청한다.

<img width="374" alt="image" src="https://user-images.githubusercontent.com/60502370/155867724-041cbd0b-8270-4c8f-b858-863d3dc2f31f.png">